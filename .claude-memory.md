# Claude Memory - Toolbox

Este arquivo serve como √≠ndice central da "caixa de ferramentas" - arquivos de mem√≥ria persistente que definem workflows, processos e contextos para auxiliar nas intera√ß√µes com Claude neste diret√≥rio.

**Leia este arquivo no in√≠cio de cada sess√£o para ter acesso √†s ferramentas e contextos dispon√≠veis.**

---

## About

Este diret√≥rio cont√©m arquivos de workflow e mem√≥ria que permitem ao Claude manter consist√™ncia e efici√™ncia nas intera√ß√µes. Cada arquivo de mem√≥ria documenta um processo espec√≠fico que pode ser invocado durante as sess√µes.

---

## Ferramentas Dispon√≠veis

### 1. Workflow de Organiza√ß√£o de Notas
**Arquivo**: `.workflow-claude-notes-organization.md`

**Prop√≥sito**: Define o processo padr√£o para organiza√ß√£o de notas di√°rias com identifica√ß√£o de t√≥picos e sugest√£o de prioridades.

**Quando usar**: Sempre que houver um arquivo de notas com blocos `[raw]` e `[prompt]` que precise ser processado.

**Estrutura**:
- Blocos: `[raw]` ‚Üí `[prompt]` ‚Üí `[organized]`
- Separadores: `---` entre blocos
- Tags sempre em min√∫sculas

**Comando t√≠pico**:
```
leia o [arquivo].md e execute a a√ß√£o contida no bloco [prompt].
Registre o retorno no local [organized], mantendo a tag.
```

**Output esperado**:
- Topics Identified & Organized
- Suggested Priorities com pr√≥ximos passos

### 2. Workflow de Session Logging
**Arquivo**: `.workflow-session-logging.md`

**Prop√≥sito**: Registrar todas as intera√ß√µes e atividades realizadas em cada sess√£o para manter hist√≥rico e continuidade.

**Quando usar**:
- In√≠cio: `/start` carrega contexto e lembra de fazer log
- Fim: `/end` cria/atualiza log da sess√£o

**Estrutura**:
- Arquivo: `YYYY.MM.DD.md` (exemplo: `2025.11.15.md`)
- Bloco: `[session-log]`
- Se√ß√µes: Atividades, Arquivos modificados, Pr√≥ximos passos, Notas

**Obrigat√≥rio**: Toda sess√£o deve ter seu log registrado

### 3. Workflow de Session Continuity
**Arquivo**: `.workflow-session-continuity.md`

**Prop√≥sito**: Manter contexto entre sess√µes, permitindo retomar trabalho de onde parou ou iniciar nova atividade com awareness do hist√≥rico.

**Como funciona**:
- `/start` l√™ automaticamente o log mais recente
- Apresenta resumo da √∫ltima sess√£o
- Lista pend√™ncias (tarefas n√£o conclu√≠das)
- Pergunta se deve continuar ou iniciar novo foco

**Benef√≠cios**:
- Continuidade natural sem reexplicar contexto
- Retoma direto de onde parou
- Flexibilidade para mudar de foco mantendo hist√≥rico

---

## Conven√ß√µes Gerais

### Nomenclatura de Arquivos de Mem√≥ria
- Prefixo com `.` para arquivos ocultos de workflow
- Formato: `.workflow-[nome-descritivo].md`
- Mem√≥ria central: `.claude-memory.md` (este arquivo)

### Tags e Marcadores
- Sempre min√∫sculas: `[raw]`, `[prompt]`, `[organized]`, etc.
- Separadores visuais: `---`
- Blocos claramente demarcados

---

## Frameworks de Prioriza√ß√£o

### Quick Win Framework
**Uso**: Priorizar tarefas baseado em benef√≠cio vs dificuldade

**Crit√©rios**:
- **Benef√≠cio**: Impacto/ganho da tarefa (Alto/M√©dio/Baixo)
- **Dificuldade**: Tempo e complexidade de implementa√ß√£o (Alta/M√©dia/Baixa)

**Matriz de Prioriza√ß√£o**:
1. üéØ **Quick Wins** (Alto benef√≠cio + Baixa dificuldade) ‚Üí PRIORIDADE M√ÅXIMA
2. üìà **Major Projects** (Alto benef√≠cio + Alta dificuldade) ‚Üí Planejar bem
3. üîß **Fill Ins** (Baixo benef√≠cio + Baixa dificuldade) ‚Üí Quando sobrar tempo
4. ‚ùå **Time Wasters** (Baixo benef√≠cio + Alta dificuldade) ‚Üí Evitar

**Exemplo aplicado**:
- SessionEnd hook: Alto benef√≠cio (nunca perde sess√£o) + Baixa dificuldade (5-10 min) = üéØ Quick Win

**Quando usar**: Ao planejar implementa√ß√µes ou decidir pr√≥ximos passos

---

## Slash Commands Dispon√≠veis

### `/continue`
**Uso recomendado para retomar trabalho**. Carrega ferramentas e contexto da √∫ltima sess√£o, assume que vai continuar de onde parou. Apresenta pend√™ncias e continua direto.

### `/new`
**Uso recomendado para nova atividade**. Carrega ferramentas e awareness da √∫ltima sess√£o, mas foca em come√ßar algo novo. N√£o lista pend√™ncias.

### `/start`
Carrega ferramentas e contexto, mas **pergunta** se deseja continuar ou iniciar novo. Use quando quiser escolher na hora.

### `/memory`
Consulta a caixa de ferramentas durante a sess√£o. √ötil para relembrar workflows dispon√≠veis.

### `/organize`
Executa o workflow de organiza√ß√£o de notas. Pode especificar o arquivo ou ser√° perguntado.

### `/end`
Finaliza a sess√£o criando/atualizando o log de atividades do dia (YYYY.MM.DD.md). Pergunta sobre atividades realizadas e cria registro estruturado.

### `/auto-approve`
**Toggle em tempo real de auto-aprova√ß√£o com m√∫ltiplos n√≠veis.**

Uso:
- `/auto-approve on` - Ativa modo "edits" (Edit/Write apenas)
- `/auto-approve bash` - Ativa modo "bash" (Edit/Write/Bash)
- `/auto-approve all` - Ativa modo "all" (todos os tools)
- `/auto-approve off` - Desativa tudo (comportamento padr√£o)
- `/auto-approve status` - Verifica n√≠vel atual

Controla quais opera√ß√µes requerem aprova√ß√£o manual. Mudan√ßas aplicam instantaneamente.

**N√≠veis dispon√≠veis**:
- `off` - Nada aprovado automaticamente (padr√£o seguro)
- `edits` - Apenas Edit e Write
- `bash` - Edit, Write e Bash
- `all` - Todos os tools (m√°xima automa√ß√£o)

---

## Auto-Aprova√ß√£o com M√∫ltiplos N√≠veis

**Status**: ‚úÖ Configurado com toggle em tempo real e m√∫ltiplos n√≠veis

**Arquivos**:
- `.claude/settings.json` - Configura√ß√£o local do hook
- `.claude/auto-approve-state` - Arquivo de estado (off/edits/bash/all)
- `.claude/auto-approve-edits.py` - Script PreToolUse com l√≥gica de n√≠veis
- `.claude/AUTO-APPROVE-README.md` - Documenta√ß√£o completa

**Prop√≥sito**: Elimina prompts de aprova√ß√£o manual para opera√ß√µes selecionadas, com controle granular.

**N√≠veis dispon√≠veis**:
- `off` - Nada aprovado automaticamente (padr√£o seguro)
- `edits` - Apenas Edit e Write
- `bash` - Edit, Write e Bash
- `all` - Todos os tools (m√°xima automa√ß√£o)

**Como usar**:
1. **Primeira vez**: Reinicie o Claude CLI para registrar o hook
2. **Escolher n√≠vel**:
   - `/auto-approve on` ‚Üí modo edits (recomendado para trabalho normal)
   - `/auto-approve bash` ‚Üí modo bash (quando precisa rodar comandos)
   - `/auto-approve all` ‚Üí modo all (m√°xima automa√ß√£o, use com cautela)
   - `/auto-approve off` ‚Üí desativa tudo
3. **Verificar**: Use `/auto-approve status` para ver n√≠vel atual

**Toggle em tempo real**: Hook l√™ arquivo de estado a cada opera√ß√£o, permitindo mudar de n√≠vel sem reiniciar CLI.

**Escopo**: Funciona APENAS neste diret√≥rio (n√£o afeta outros projetos).

**Importante**: Configura√ß√£o LOCAL (`.claude/settings.json`), n√£o global. Port√°vel e isolada por projeto.

---

## Graceful Shutdown (SessionStart/SessionEnd Hooks)

**Status**: ‚úÖ Implementado com rastreamento por sess√£o

**Prop√≥sito**: Garantir que **nenhuma sess√£o seja perdida**, mesmo se voc√™ esquecer de executar `/end` antes de encerrar o CLI (Ctrl+C).

**Como funciona**:
1. **SessionStart hook** (`.claude/session-start.py`):
   - Executa automaticamente ao iniciar CLI
   - Cria arquivo `.claude/.current-session-id` com timestamp √∫nico
   - Marca in√≠cio desta sess√£o espec√≠fica

2. **Durante a sess√£o**:
   - Se voc√™ usa `/end` ‚Üí comando deleta `.current-session-id` (marca como logged)
   - Se voc√™ n√£o usa `/end` ‚Üí arquivo permanece

3. **SessionEnd hook** (`.claude/session-auto-end.py`):
   - Executa automaticamente ao encerrar CLI (Ctrl+C ou fechamento)
   - Verifica se `.current-session-id` existe:
     - **N√ÉO existe** ‚Üí `/end` foi executado ‚Üí n√£o faz nada ‚úÖ
     - **EXISTE** ‚Üí sess√£o n√£o foi logged ‚Üí cria registro autom√°tico ‚úÖ

**M√∫ltiplas sess√µes no mesmo dia**:
```
Manh√£:  Sess√£o 1 ‚Üí /end ‚Üí log completo ‚úÖ
        SessionEnd ‚Üí detecta logged ‚Üí n√£o faz nada

Tarde:  Sess√£o 2 ‚Üí esquece /end
        SessionEnd ‚Üí detecta n√£o-logged ‚Üí append ao log do dia ‚úÖ
```

**Arquivos**:
- `.claude/session-start.py` - Marca in√≠cio da sess√£o
- `.claude/session-auto-end.py` - Backup autom√°tico ao encerrar
- `.claude/.current-session-id` - Estado da sess√£o atual (criado/deletado automaticamente)
- `.claude/settings.json` - Hooks SessionStart e SessionEnd registrados

**Benef√≠cios**:
- ‚úÖ Zero fric√ß√£o (funciona silenciosamente)
- ‚úÖ Nunca perde sess√£o (sempre haver√° registro)
- ‚úÖ Suporta m√∫ltiplas sess√µes por dia
- ‚úÖ N√£o interfere com `/end` manual
- ‚úÖ Continuidade garantida via `/continue`

**Ativa√ß√£o**: Requer reiniciar Claude CLI uma vez. Ap√≥s isso, funciona automaticamente em todas as sess√µes.

---

## Como Replicar Este Sistema em Novo Projeto

**Arquivo**: `.claude/setup-claude-memory.sh`

**Como usar**:
```bash
# Op√ß√£o 1: Executar direto deste diret√≥rio
bash .claude/setup-claude-memory.sh /caminho/do/novo/projeto

# Op√ß√£o 2: Copiar script e executar l√°
cp .claude/setup-claude-memory.sh /novo/projeto/
cd /novo/projeto
bash setup-claude-memory.sh
```

**O que faz**:
- Cria toda estrutura (mem√≥ria, workflows, comandos)
- Instala documenta√ß√£o completa
- Sistema fica id√™ntico ao deste diret√≥rio
- Pronto para usar ap√≥s reiniciar Claude CLI

**Ap√≥s instala√ß√£o**:
1. Reiniciar Claude CLI
2. Usar `/start` para come√ßar
3. Sistema completo funcionando

---

## Sistema de Mem√≥ria Hier√°rquica

**Status**: ‚úÖ Implementado (FASE 0-6 completas)
**Vers√£o**: 2.0

### Arquitetura

Sistema completo de mem√≥ria multi-camadas com agrega√ß√£o temporal para economia de tokens e personaliza√ß√£o cont√≠nua.

**Mem√≥ria Global** (multi-projeto):
- Localiza√ß√£o: `~/.claude-memory/`
- Perfil do usu√°rio versionado
- Compartilhado entre todos os projetos Claude
- PII protegido via reda√ß√£o autom√°tica

**Mem√≥ria Local** (por projeto):
- Working memory: `.session-state.md` (~50 linhas)
- Logs di√°rios: `logs/daily/YYYY.MM.DD.md` (detalhado)
- Resumos semanais: `logs/weekly/YYYY.MM.weekN.md` (~100 linhas)
- Resumos mensais: `logs/monthly/YYYY.MM.md` (~30 linhas)

**Economia de Tokens**: 50-96% dependendo da hierarquia carregada

### Estrutura de Diret√≥rios

```
# Projeto Local
.session-state.md              # Working memory
logs/
‚îú‚îÄ‚îÄ daily/                     # Logs detalhados
‚îú‚îÄ‚îÄ weekly/                    # Agrega√ß√µes semanais
‚îî‚îÄ‚îÄ monthly/                   # Agrega√ß√µes mensais

# Mem√≥ria Global (~/.claude-memory/)
global-memory.md               # Perfil completo (com PII)
global-memory.safe.md          # Perfil redacted (auto-gerado)
profile-history/               # Snapshots versionados
‚îÇ   ‚îî‚îÄ‚îÄ YYYY-MM-DD_*.md
profile-changelog.md           # Hist√≥rico de mudan√ßas
projects/                      # Refer√™ncias a projetos
    ‚îî‚îÄ‚îÄ [project-name].md
```

### Workflows de Agrega√ß√£o

**4 Workflows documentados**:
1. `.workflow-weekly-aggregation.md` - Dia ‚Üí Semana (~85% economia)
2. `.workflow-monthly-aggregation.md` - Semana ‚Üí M√™s (~93% economia vs di√°rios)
3. `.workflow-profile-update.md` - Atualiza√ß√£o de perfil (mensal ou trigger-based)
4. `.workflow-metrics-collection.md` - M√©tricas hol√≠sticas (7 dimens√µes)

### Comandos Slash Atualizados

**9 Comandos dispon√≠veis**:
- `/start` - Pergunta se continua ou inicia novo
- `/continue` - Retoma de onde parou (carrega hierarquia + pend√™ncias)
- `/new` - Nova atividade (carrega hierarquia, sem pend√™ncias)
- `/memory` - Consulta ferramentas dispon√≠veis
- `/organize` - Organiza notas
- `/end` - Finaliza sess√£o (logs + m√©tricas + session-state)
- `/update-profile` - Atualiza perfil global (manual)
- `/reflect` - Coleta m√©tricas de well-being
- `/aggregate` - For√ßa agrega√ß√£o semanal/mensal

### Sistema de Privacidade (PII Redaction)

**Arquivo**: `.claude/redact-pii.py`

**Funcionamento**:
- Marca PII em `global-memory.md`: `[PII:TYPE]value[/PII:TYPE]`
- Gera `global-memory.safe.md`: `[REDACTED:TYPE]`
- Executado automaticamente por `/continue` e `/new`

**Tipos PII suportados**:
- NAME, EMAIL, LOCATION, COMPANY, PROJECT
- CREDENTIAL, API, DOCUMENT

**H√≠brido**:
- Dados completos localmente (`global-memory.md`)
- Dados redacted em transmiss√£o (`.safe.md`)

### Framework de M√©tricas Hol√≠sticas

**Arquivo**: `.claude/METRICS-FRAMEWORK.md`

**7 Dimens√µes de Impacto Humano**:
1. Performance & Productivity
2. Cognitive Load & Mental Energy
3. Well-Being & Satisfaction
4. Learning & Growth
5. Autonomy & Empowerment
6. Collaboration Quality
7. Life Integration

**Coleta**:
- **Inferidos**: An√°lise autom√°tica de logs (complexity, velocity, tech exposure)
- **Calculados**: Derivados (time saved, autonomy growth)
- **Relatados**: Via `/reflect` (satisfaction, energy, frustration)

**Agrega√ß√£o**: M√©tricas aparecem em logs di√°rios, resumos semanais e mensais

### Perfil Global Versionado

**Conte√∫do**:
- User Profile (identity, working style, tech preferences, communication)
- Collaboration Patterns (como trabalhar com Claude)
- Projects Context (projetos ativos)
- Opportunities & Quick Wins
- Recurring Architecture Decisions
- Meta-Learnings

**Versionamento**:
- Sem√¢ntico: Major.Minor (ex: 2.1)
- Snapshots em `profile-history/`
- Changelog completo em `profile-changelog.md`

**Atualiza√ß√£o**:
- Mensal (autom√°tico via `/continue`)
- Threshold (3+ men√ß√µes/semana de mudan√ßa)
- Manual (via `/update-profile`)

### Como Usar

**In√≠cio de sess√£o**:
```
/continue  ‚Üí Retoma trabalho (pend√™ncias listadas)
/new       ‚Üí Nova atividade (sem press√£o de pend√™ncias)
```

**Durante sess√£o**:
```
/reflect   ‚Üí Registra well-being (opcional)
/organize  ‚Üí Processa notas
```

**Fim de sess√£o**:
```
/end       ‚Üí Cria log + m√©tricas + atualiza session-state
```

**Manuten√ß√£o**:
```
/aggregate week      ‚Üí Toda segunda-feira (recomendado)
/aggregate month     ‚Üí Todo dia 1 do m√™s (recomendado)
/update-profile      ‚Üí Quando detectar mudan√ßas significativas
```

### Benef√≠cios

**Economia de Tokens**:
- Carregamento t√≠pico: ~330 linhas (hierarquia)
- Vs logs brutos: ~5.000+ linhas
- **Economia: ~93%**

**Personaliza√ß√£o Cont√≠nua**:
- Claude aprende suas prefer√™ncias ao longo do tempo
- Adapta colabora√ß√£o ao seu working style
- Sugere melhorias baseadas em padr√µes

**Insights Hol√≠sticos**:
- Tracking de impacto humano (al√©m de produtividade)
- Tend√™ncias de well-being, aprendizado, autonomia
- Identifica√ß√£o de padr√µes e oportunidades

**Continuidade**:
- Zero perda de contexto entre sess√µes
- Retoma trabalho exatamente de onde parou
- Hist√≥rico completo rastre√°vel

---

## Como Adicionar Novas Ferramentas

1. Crie arquivo `.workflow-[nome].md` documentando o processo
2. Adicione entrada nesta se√ß√£o "Ferramentas Dispon√≠veis"
3. Descreva: arquivo, prop√≥sito, quando usar, estrutura esperada
4. Opcionalmente, crie slash command em `.claude/commands/[nome].md`

---

## Contexto do Diret√≥rio

**Tipo**: Obsidian Vault
**Uso**: Notas pessoais, organiza√ß√£o de ideias, workflows de cria√ß√£o
**T√≥picos principais**: Creative workflow, image generation, LLM infrastructure, scene development

---

*√öltima atualiza√ß√£o: 2025-11-15*
