# Workflow: Metrics Collection

**Prop√≥sito**: Coletar e agregar m√©tricas hol√≠sticas de impacto humano baseado no METRICS-FRAMEWORK.md.

**Quando executar**:
- Automaticamente: A cada `/end` (infer√™ncia de m√©tricas da sess√£o)
- Manualmente: `/reflect` (registro expl√≠cito de estado)
- Agrega√ß√£o: Ao criar resumos semanais/mensais

---

## Fundamento Te√≥rico

Baseado em **METRICS-FRAMEWORK.md** (7 dimens√µes de impacto humano):
1. Performance & Productivity
2. Cognitive Load & Mental Energy
3. Well-Being & Satisfaction
4. Learning & Growth
5. Autonomy & Empowerment
6. Collaboration Quality
7. Life Integration

---

## Tipos de Coleta

### 1. Inferidos (Autom√°tico)
**Fonte**: An√°lise de logs por Claude
**Frequ√™ncia**: A cada `/end`

**M√©tricas inferidas**:

#### Performance & Productivity
- Velocity: Arquivos modificados/hora
- Output quality: Commits com testes, refactorings
- Task completion: % de pend√™ncias completadas

#### Cognitive Load
- Complexity score: Baseado em linguagem dos logs
  - "dif√≠cil", "complexo", "confuso" ‚Üí alta carga
  - "f√°cil", "r√°pido", "tranquilo" ‚Üí baixa carga
- Context switches: Mudan√ßas de projeto/tarefa por sess√£o

#### Learning & Growth
- New tech exposure: Tecnologias novas mencionadas
- Problem-solving: "resolvido", "descobri", "aprendi"

#### Collaboration Quality
- AI reliance: % de tarefas com Claude vs sozinho
- Iteration cycles: Quantas vezes pediu refino

### 2. Calculados (Derivados)
**Fonte**: Combina√ß√£o de m√©tricas inferidas
**Frequ√™ncia**: Agrega√ß√£o semanal/mensal

**M√©tricas calculadas**:

#### Time Saved (Estimado)
- Tasks automated: Hooks, scripts criados
- Estimated hours: Baseado em complexidade

#### Autonomy Growth
- Solo tasks trend: % de tarefas feitas sozinho ao longo do tempo
- Skill acquisition: Novas habilidades / m√™s

### 3. Relatados (Expl√≠cito)
**Fonte**: Usu√°rio via `/reflect`
**Frequ√™ncia**: Ad-hoc, recomendado semanal

**M√©tricas relatadas**:

#### Well-Being
- Satisfaction (1-10): "Como se sente com o progresso?"
- Energy level: Energizado / Neutro / Drenado
- Frustration points: Blockers, dificuldades

#### Life Integration
- Work-life balance: Horas trabalhadas, flexibilidade
- Personal notes: Opcional, texto livre

---

## Processo de Coleta

### Autom√°tico (via `/end`)

1. **Claude analisa log da sess√£o**:
   - Conta arquivos modificados
   - Identifica padr√µes de linguagem (complexidade)
   - Detecta novas tecnologias
   - Calcula context switches

2. **Infere m√©tricas**:
   ```markdown
   ## M√©tricas da Sess√£o
   - Duration: ~X min
   - Files modified: Y
   - Commits: Z
   - Complexity: [Low/Medium/High]
   - New tech: [lista]
   - AI reliance: [Low/Medium/High]
   ```

3. **Armazena em log di√°rio**:
   - Se√ß√£o `## M√©tricas da Sess√£o` em `logs/daily/YYYY.MM.DD.md`

### Manual (via `/reflect`)

1. **Claude prompt ao usu√°rio**:
   ```
   Quick reflection (opcional):

   1. Satisfa√ß√£o com o progresso hoje? (1-10): _
   2. N√≠vel de energia agora? (Energizado/Neutro/Drenado): _
   3. Algo frustrante ou bloqueador? (texto livre): _
   4. Notas pessoais (opcional): _
   ```

2. **Registro tempor√°rio**:
   - Salva em `.metrics-reflection.tmp`

3. **Incorpora√ß√£o no pr√≥ximo `/end`**:
   - Merge com m√©tricas inferidas
   - Aparece na se√ß√£o `## M√©tricas da Sess√£o`

---

## Agrega√ß√£o Semanal

Quando executar `.workflow-weekly-aggregation.md`, Claude:

1. **Coleta todas as m√©tricas das sess√µes da semana**

2. **Calcula agregados**:

   ```markdown
   ## M√©tricas da Semana

   ### Performance & Productivity
   - Sessions: X
   - Total files: Y
   - Total commits: Z
   - Avg velocity: W files/hour
   - Completion rate: P% (tarefas completas / total)

   ### Cognitive Load & Mental Energy
   - Avg complexity: [Low/Medium/High]
   - High load sessions: N
   - Context switches: M avg/session

   ### Well-Being & Satisfaction (se relatado)
   - Avg satisfaction: X/10
   - Energy trajectory: [Melhorando/Est√°vel/Declinando]
   - Top frustration: [item mais mencionado]

   ### Learning & Growth
   - New tech: N tecnologias
   - Skills acquired: [lista]
   - Problem-solving wins: M

   ### Autonomy & Empowerment
   - Solo tasks: P%
   - Trend vs last week: [+X% / -X% / est√°vel]

   ### Collaboration Quality
   - AI reliance: [Low/Medium/High]
   - Avg iterations: N

   ### Life Integration (se relatado)
   - Total hours: ~X
   - Work-life balance: [assessment]
   ```

3. **Identifica tend√™ncias**:
   - Compara com semanas anteriores
   - Detecta padr√µes emergentes

---

## Agrega√ß√£o Mensal

Quando executar `.workflow-monthly-aggregation.md`, Claude:

1. **Agrega m√©tricas de todas as semanas**

2. **Calcula tend√™ncias de longo prazo**:

   ```markdown
   ## M√©tricas Mensais

   ### Hol√≠sticas (Tend√™ncias)

   **Performance**:
   - Velocity trend: [Crescendo/Est√°vel/Decrescendo]
   - Output quality: [Melhorando/Est√°vel/Piorando]

   **Cognitive Load**:
   - Complexity trend: [Aumentando/Est√°vel/Diminuindo]
   - Load management: [Melhorando/Piorando]

   **Well-Being**:
   - Satisfaction trajectory: [Gr√°fico ASCII ou descri√ß√£o]
   - Energy pattern: [Consistente/Vari√°vel/Esgotando]

   **Learning**:
   - Learning curve: [Steep/Moderate/Plateau]
   - Tech stack expansion: +N tecnologias

   **Autonomy**:
   - Independence: [Crescendo/Est√°vel]
   - Confidence: [Alta/M√©dia/Baixa]

   **Collaboration**:
   - AI-Human synergy: [Excelente/Boa/Precisa ajuste]

   **Life Integration**:
   - Balance score: [Saud√°vel/Neutro/Desequil√≠brio]
   ```

3. **Actionable insights**:
   - Recomenda√ß√µes baseadas em tend√™ncias
   - Alertas se m√©tricas cr√≠ticas (well-being, burnout)

---

## Exemplo de Dashboard (Futuro)

```markdown
# Metrics Dashboard - 2025.11

## üöÄ Performance
- Velocity: 15 files/hour (‚Üë 20% vs Oct)
- Commits: 147 (‚Üë 5%)

## üß† Cognitive Load
- Avg complexity: Medium
- High load days: 4/30 (13%)

## üòä Well-Being
- Satisfaction: 8.2/10 (‚Üë 0.5)
- Energy: Stable

## üìö Learning
- New tech: 7 (Python, Docker, PostgreSQL, ...)
- Curve: Steep

## üí™ Autonomy
- Solo tasks: 65% (‚Üë 15%)

## ü§ù Collaboration
- AI reliance: Medium
- Synergy: Excellent

## ‚öñÔ∏è Life Integration
- Hours: ~120/month (~6h/day)
- Balance: Healthy
```

---

## Execu√ß√£o via Comandos

### `/reflect`
**Uso**: Registro manual de estado
```
Claude prompts usu√°rio com 4 perguntas
‚Üí Salva em .metrics-reflection.tmp
‚Üí Incorporado no pr√≥ximo /end
```

### `/end` (atualizado)
**Inclui**:
1. Inferir m√©tricas da sess√£o
2. Ler .metrics-reflection.tmp (se existir)
3. Merge e salvar em log di√°rio
4. Deletar .tmp

### `/aggregate week`
**Inclui**: C√°lculo de m√©tricas agregadas semanais

### `/aggregate month`
**Inclui**: Tend√™ncias de longo prazo e insights

---

## Valida√ß√£o

**Checklist**:
- [ ] M√©tricas inferidas aparecem em logs di√°rios
- [ ] `/reflect` funciona e dados s√£o incorporados
- [ ] Agrega√ß√µes semanais calculam corretamente
- [ ] Tend√™ncias mensais fazem sentido
- [ ] Insights s√£o actionable

---

## Notas Importantes

- **Privacidade**: M√©tricas de well-being s√£o PII-free mas devem estar em logs/ (n√£o versionados)
- **Opcional**: `/reflect` √© opcional, sistema funciona s√≥ com infer√™ncias
- **N√£o invasivo**: Coleta passiva, m√≠nimo esfor√ßo do usu√°rio
- **Actionable**: Foco em insights √∫teis, n√£o apenas n√∫meros
- **Tend√™ncias > Absolutos**: Evolu√ß√£o ao longo do tempo mais importante que valores pontuais

---

## Exemplo de Uso no Perfil Global

M√©tricas mensais podem atualizar perfil:
```markdown
## Meta-Learnings
**Padr√µes de Produtividade** (Nov 2025):
- Velocity peak: Ter√ßas e quartas (manh√£s)
- Low energy: Sextas (tardes)
- High cognitive load correlaciona com learning steep
```

---

*Este workflow captura impacto humano real da colabora√ß√£o AI-Human, indo al√©m de m√©tricas t√©cnicas*
