# Workflow: Profile Update

**Prop√≥sito**: Atualizar perfil global do usu√°rio quando detectadas mudan√ßas significativas.

**Quando executar**:
- Automaticamente: Mensalmente (revis√£o padr√£o)
- Automaticamente: Threshold atingido (3+ men√ß√µes de mudan√ßa em 1 semana)
- Manualmente: `/update-profile`

---

## Triggers de Atualiza√ß√£o

### 1. Trigger Mensal (Autom√°tico)
- **Frequ√™ncia**: Primeiro dia de cada m√™s
- **Gatilho**: `/continue` ou `/new` detecta >30 dias desde √∫ltima atualiza√ß√£o
- **Escopo**: Revis√£o completa do perfil

### 2. Trigger por Threshold (Autom√°tico)
- **Frequ√™ncia**: Ad-hoc quando detectado padr√£o novo
- **Gatilho**: 3+ men√ß√µes da mesma mudan√ßa em 1 semana de logs
- **Escopo**: Se√ß√£o espec√≠fica afetada

**Exemplos de threshold**:
- Nova tecnologia mencionada 3x ‚Üí Adicionar em "Tech Stack"
- Novo padr√£o arquitetural usado 3x ‚Üí Adicionar em "Architecture Decisions"
- Mudan√ßa de prefer√™ncia expressa 3x ‚Üí Atualizar "Preferences"

### 3. Trigger Manual
- **Comando**: `/update-profile`
- **Uso**: Quando usu√°rio quer for√ßar atualiza√ß√£o
- **Escopo**: Completo ou parcial (usu√°rio especifica)

---

## Input
- **Perfil atual**: `~/.claude-memory/global-memory.md`
- **Logs recentes**: √öltimos 30 dias de `logs/daily/` (ou √∫ltimo resumo mensal)
- **Changelog**: `~/.claude-memory/profile-changelog.md`

## Output
- **Perfil atualizado**: `~/.claude-memory/global-memory.md` (overwrite)
- **Snapshot**: `~/.claude-memory/profile-history/YYYY-MM-DD_description.md`
- **Changelog entry**: Adicionado em `profile-changelog.md`

---

## Processo

### 1. An√°lise de Mudan√ßas

Claude deve ler os logs recentes e identificar:

#### a) Novas Tecnologias/Ferramentas
- Stack tech: Novas linguagens, frameworks, bibliotecas
- Tools: Novos editores, CLIs, servi√ßos

#### b) Mudan√ßas de Prefer√™ncias
- Working style: Mudan√ßa de abordagem (ex: teste-primeiro agora)
- Communication: Novo estilo ou idioma
- Priorities: Novas √°reas de foco

#### c) Novos Padr√µes Arquiteturais
- Decis√µes recorrentes emergentes
- Novos trade-offs consistentemente aplicados

#### d) Evolu√ß√£o de Projetos
- Novos projetos iniciados
- Projetos completados/arquivados
- Mudan√ßa de foco entre projetos

#### e) Aprendizados e Crescimento
- Novas habilidades adquiridas
- Dom√≠nio de tecnologias
- √Åreas de expertise expandidas

#### f) Mudan√ßas de Contexto
- Novo emprego/fun√ß√£o
- Nova localiza√ß√£o
- Novos objetivos declarados

### 2. Compara√ß√£o com Perfil Atual

Para cada mudan√ßa identificada:
1. Verificar se j√° existe no perfil atual
2. Se existir: Atualizar se houver evolu√ß√£o
3. Se n√£o existir: Adicionar se confidence >= m√©dia

**Confidence levels**:
- **Alta**: 5+ men√ß√µes consistentes, explicitamente declarado
- **M√©dia**: 3-4 men√ß√µes, padr√£o observado
- **Baixa**: 1-2 men√ß√µes, inferido fracamente

**Regra**: S√≥ adicionar/atualizar se confidence >= m√©dia

### 3. Proposta de Atualiza√ß√£o

Claude apresenta ao usu√°rio:

```markdown
## Proposta de Atualiza√ß√£o do Perfil

**Data**: YYYY-MM-DD
**Trigger**: [Mensal | Threshold | Manual]
**Mudan√ßas detectadas**: N

---

### Adi√ß√µes Propostas
1. **Se√ß√£o**: [nome da se√ß√£o]
   **Item**: [novo item]
   **Confidence**: [Alta/M√©dia]
   **Evid√™ncias**: [3 exemplos de logs]

2. ...

---

### Modifica√ß√µes Propostas
1. **Se√ß√£o**: [nome da se√ß√£o]
   **Item atual**: [texto atual]
   **Item novo**: [texto proposto]
   **Confidence**: [Alta/M√©dia]
   **Evid√™ncias**: [3 exemplos]

---

### Remo√ß√µes Propostas (Opcional)
1. **Se√ß√£o**: [nome]
   **Item**: [item obsoleto]
   **Motivo**: N√£o observado em √∫ltimos 60 dias

---

**Aprovar**: [y/n]
```

### 4. Aplica√ß√£o das Mudan√ßas (Se Aprovado)

1. **Criar snapshot do perfil atual**:
   - Copiar `global-memory.md` ‚Üí `profile-history/YYYY-MM-DD_description.md`
   - Description: Ex: "monthly_review", "threshold_new_tech", etc

2. **Atualizar global-memory.md**:
   - Aplicar adi√ß√µes
   - Aplicar modifica√ß√µes
   - Aplicar remo√ß√µes
   - Atualizar header (data, vers√£o)

3. **Atualizar profile-changelog.md**:
   ```markdown
   ## YYYY-MM-DD - Vers√£o X.Y
   **Snapshot**: `profile-history/YYYY-MM-DD_description.md`
   **Trigger**: [Mensal | Threshold | Manual]

   **Mudan√ßas**:
   - ‚ú® Adicionado: [item]
   - ‚úèÔ∏è Modificado: [item]
   - üóëÔ∏è Removido: [item]

   **Se√ß√µes atualizadas**: [lista]
   **Confidence**: [geral]
   ```

4. **Marcar PIIs (se houver novos)**:
   - Envolver novos dados pessoais com `[PII:TYPE]...[/PII:TYPE]`

5. **Regenerar .safe.md**:
   - Executar `python .claude/redact-pii.py`

---

## Execu√ß√£o via Comando

**Comando**: `/update-profile [scope]`

**Scopes**:
- `/update-profile` ‚Üí Full review (padr√£o)
- `/update-profile tech` ‚Üí Apenas tecnologias/ferramentas
- `/update-profile preferences` ‚Üí Apenas prefer√™ncias
- `/update-profile projects` ‚Üí Apenas contexto de projetos

**Processo**:
1. Claude analisa logs conforme escopo
2. Apresenta proposta de mudan√ßas
3. Aguarda aprova√ß√£o do usu√°rio
4. Se aprovado: aplica mudan√ßas e versiona

---

## Valida√ß√£o

**Checklist p√≥s-atualiza√ß√£o**:
- [ ] Snapshot criado em `profile-history/`
- [ ] `global-memory.md` atualizado
- [ ] `profile-changelog.md` atualizado
- [ ] Novos PIIs marcados corretamente
- [ ] `.safe.md` regenerado
- [ ] Vers√£o incrementada no header

---

## Versionamento

**Esquema sem√¢ntico**:
- **Major (X.0)**: Mudan√ßas grandes (novo emprego, mudan√ßa de stack principal)
- **Minor (X.Y)**: Adi√ß√µes e modifica√ß√µes normais

**Exemplo**:
- 1.0 ‚Üí Perfil inicial
- 1.1 ‚Üí Mensal (adicionou 2 techs)
- 1.2 ‚Üí Threshold (novo padr√£o arquitetural)
- 2.0 ‚Üí Mudan√ßa de emprego

---

## Notas Importantes

- **Aprova√ß√£o obrigat√≥ria**: Nunca atualizar perfil sem confirmar com usu√°rio
- **Evid√™ncias claras**: Sempre mostrar 2-3 exemplos de logs
- **Revers√≠vel**: Snapshots permitem rollback se necess√°rio
- **PII awareness**: Marcar novos dados pessoais imediatamente
- **Incremental**: Pequenas atualiza√ß√µes frequentes > grandes infrequentes

---

*Este workflow mant√©m o perfil sempre atualizado, permitindo personaliza√ß√£o cont√≠nua da colabora√ß√£o AI-Human*
